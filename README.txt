REQUIREMENTS
============

* django (1.2, known not to work on older versions)
* simplejson
* pysqlite, if using Python < 2.5
* gettext

The virtualenv install script installs everything but the Python sqlite
extension.

HOW TO RUN
==========

# Create virtualenv environment
./install-virtualenv.sh

# Create local configuration
cp sikteeri/local_settings.py.template sikteeri/local_settings.py

# Set at least a secret key, preferably a working email address too
$EDITOR sikteeri/local_settings.py

# init virtualenv and set PYTHONPATH=.. (added to activate script in install)
source env/bin/activate

# Compile translations
./run-sikteeri.sh

MIGRATION CONSIDERATIONS
==========

1. Payment reference numbering scheme

 When importing data from legacy database, make sure that the reference
 number format in Sikteeri is different from that used in the legacy
 system. This way it is possible to distinguish easily which bills were
 generated by Sikteeri in case any problems arise.

 It is possible to either import all legacy data and mark all cycles paid
 or the cycles can be imported with proper reference numbers and the
 payment data can be also imported and that way the payment control be
 synchronized as well. In this case it is necessary to duplicate any
 manual modifications to billing data (such as payments with wrong
 reference number etc).

Checklist:

 [ ] Update alias list before exporting member data
    * aliasdb.list
    * member-application id mapping
 [ ] Member data export from legacy to JSON
 [ ] Import membership fees (loaddata or initial run-sikteeri)
 [ ] Member data import from JSON to sikteeri
 [ ] Update member types
 [ ] Import payment data (csvbills)
 [ ] Import manual matches
 [ ] Make sure bill IDs start from where old system left off
 [ ] Dump database - restore point for bill test
  [ ] Makebills - send bills (TEST EMAIL BACKEND!!!)
  [ ] Verify that the "sent" bills are correct
  [ ] Verify that all payments are matched or ignored correctly
 [ ] Restore database
 [ ] Repeat previous indented steps
 [ ] Schedule makebills to run regularly
